!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var n in o)("object"==typeof exports?exports:e)[n]=o[n]}}(self,(function(){return(self.webpackChunkjodit_pro=self.webpackChunkjodit_pro||[]).push([[524],{18574:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileBrowserPro=void 0;var n=o(70655);o(87989),o(76973);var r=o(27830),i=o(98498),s=o(29653),a=o(47643),c=o(11975),l=o(36257),u=o(34522),h=o(64614),d=o(68725),p=o(43854),f=o(37538),v=o(75164),m=o(4051),g=o(28544),_=o(61104),y=o(58866),w=o(30332),b=o(97029),I=o(85475),C=o(5662),S=o(34653),P=function(e){function t(t){var o=e.call(this,(0,a.ConfigProto)(Object.assign(t||{},{resizable:!0,draggable:!0,toolbarButtons:(null==t?void 0:t.toolbarButtons)||p.Config.defaultOptions.filebrowser.buttons,buttons:b.Jodit.atom(["filebrowser.settings","fullsize","dialog.close"])}),p.Config.defaultOptions.filebrowser))||this;return o.dataProvider=(0,v.makeDataProvider)(o,o.options),o.state=(0,r.observable)({onSelectCallBack:null,theme:"default",showSideBar:!0,showFavorites:!0,showSettings:!1,showPreview:!1,withFolders:!0,foldersPosition:"bottom",info:"",metaInfo:null,currentPath:"",currentSource:"",currentBaseUrl:"",tree:[],activeElements:[],favorites:[],progress:0,lastSelectedIndex:0,elements:[],messages:[],sources:[],view:"tiles",tileSize:"default",sortBy:"name-asc",filterWord:"",onlyImages:!1}),o.persistent=new g.PersistentStore(o,o.state),o.loadingManager=new S.LoadingManager(o,o.state),o.stateManager=new u.StateManager(o.state),o.historyManager=new _.HistoryManager(o,o.state),o.contextMenuManager=new y.ContextMenuManager(o),o.header=new h.UIBrowserHeader(o,o.options,o.stateManager),o.panel=new s.UIBrowserPanel(o,o.stateManager),o.files=o.panel,o.tree=o.panel,o.progressbar=new f.UIProgress(o,o.stateManager.state),I.license.make(o),!o.persistent.theme&&o.options.theme&&(o.persistent.theme=o.options.theme),o.panel.append(o.progressbar),o.toolbar.setMod("mode","header"),o.setSize(Math.min(o.options.width,screen.width),Math.min(o.options.height,screen.height)).setHeader(o.header),o.onResizeWindow(),o.initUploader(),o.onChangeTheme(),o.fullFillOptions(),o.dataProvider.onProgress((function(e){0===e&&(e=30),o.state.progress=e})),o.e.on("beforeClose",o.removeGlobalListeners),o.e.fire("afterInit"),b.Jodit.prototype.afterInitHook.call(o),o}return n.__extends(t,e),t.prototype.className=function(){return"FileBrowserPro"},t.prototype.lock=function(t){return void 0===t&&(t="any"),this.container.classList.add("jodit_disabled"),e.prototype.lock.call(this,t)},t.prototype.unlock=function(){return this.container.classList.remove("jodit_disabled"),e.prototype.unlock.call(this)},t.prototype.status=function(e,t){void 0===t&&(t=!(e instanceof Error)),(0,a.isAbort)(e)||this.message.message((0,a.isString)(e)?e:e.message,t?"success":"error",this.options.howLongShowMsg)},t.prototype.addDisclaimer=function(e){this.dialog.appendChild(e)},t.prototype.open=function(t,o){return void 0===t&&(t=this.o.defaultCallback),n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){return this.state.onlyImages=Boolean(o),this.prepareOpening(t),e.prototype.open.call(this,this.panel.container),[2,this.e.fire("update.filebrowser")]}))}))},t.prototype.onResizeWindow=function(){(0,a.css)(this.dialog,{maxWidth:screen.width,minHeight:Math.min(this.options.height,screen.height),minWidth:Math.min(this.options.width,screen.width)})},t.prototype.onChangePath=function(){var e=this.state,t=e.currentSource;this.uploader.setPath(e.currentPath),this.uploader.setSource(t)},t.prototype.onChangeTheme=function(){this.setMod("theme",this.state.theme),this.header.setMod("theme",this.state.theme),this.panel.setMod("theme",this.state.theme),this.options.theme=this.state.theme},t.prototype.onToggleSettings=function(){this.state.showSettings=!this.state.showSettings},t.prototype.prepareOpening=function(e){var t=this;this.registerGlobalListeners(),e&&(this.state.onSelectCallBack=function(o){t.close(),e(o)}),this.persistent.syncWithState()},t.prototype.registerGlobalListeners=function(){this.e.on(this.ow,"keydown",this.onKeyPress)},t.prototype.onKeyPress=function(e){var t=this.od.activeElement;if(this.state.activeElements.length&&t&&r.Dom.isOrContains(this.panel.items.container,t)){var o=this.state.elements;switch(e.key){case l.KEY_ENTER:return this.onChooseItems();case l.KEY_DELETE:return this.onFileRemove();case l.KEY_RIGHT:case l.KEY_LEFT:case l.KEY_DOWN:case l.KEY_UP:var n=e.key===l.KEY_RIGHT||e.key===l.KEY_DOWN,i=this.state.lastSelectedIndex,s=void 0;if([l.KEY_RIGHT,l.KEY_LEFT].includes(e.key))s=n?o[i+1]?i+1:0:o[i-1]?i-1:o.length-1;else{var a=this.panel.countInRow;s=Math.round(((i+1)/a+(n?1:-1))*a-1)}return o[s]&&this.stateManager.addActive(o[s],e.shiftKey),!1}}},t.prototype.removeGlobalListeners=function(){this.e.off(this.ow,"keydown",this.onKeyPress)},t.prototype.onFileRemove=function(){var e=this;this.state.activeElements.length&&this.confirm("Are you sure?","Delete",(function(t){t&&e.__itemsRemove(e.state.activeElements)})).bindDestruct(this)},t.prototype.__itemsRemove=function(e){var t=this;if(!e.length)return Promise.resolve();var o=[];return e.forEach((function(e){o.push("folder"===e.type?t.__folderRemove((0,w.parentPath)(e.path),e.name,e.sourceName):t.__removeFile(e.file||e.name||"",e.sourceName))})),this.state.activeElements.forEach((function(e){t.stateManager.isFavorite(e)&&t.stateManager.toggleFavorite(e)})),this.state.activeElements=[],Promise.allSettled(o).then((function(){return Promise.allSettled([t.loadingManager.loadItems(),t.loadingManager.loadFolders()])}))},t.prototype.__removeFile=function(e,t){var o=this;return this.dataProvider.fileRemove(this.state.currentPath,e,t).then((function(t){o.status(t||o.i18n('File "%s" was deleted',e),!0)})).catch(this.status)},t.prototype.__folderRemove=function(e,t,o){var n=this;return this.dataProvider.folderRemove(e,t,o).then((function(r){n.status(r||n.i18n('Folder "%s" was deleted',t),!0),n.state.currentPath===e&&(n.state.currentPath=(0,w.parentPath)(e),n.state.currentSource=o)})).catch(this.status)},t.prototype.onFileEdit=function(){if(1===this.state.activeElements.length){var e=n.__read(this.state.activeElements,1)[0];d.openImageEditor.call(this,e.fileURL,e.file||"",e.path,e.sourceName,void 0,this.status)}},t.prototype.onFolderRename=function(e){var t=this;this.prompt("Enter new name","Rename",(function(o){if(!(0,a.isValidName)(o)||o===e.name)return t.status(t.i18n("Enter new name")),!1;t.dataProvider.folderRename((0,w.parentPath)(e.path),e.name,o,e.sourceName).then((function(n){t.state.activeElements=[],t.status(n,!0),t.state.currentPath=(0,w.parentPath)(e.path)+"/"+o,t.state.currentSource=e.sourceName,t.historyManager.updateCurrent(),t.loadingManager.loadFolders()})).catch(t.status)}),this.i18n("type name"),e.name).bindDestruct(this)},t.prototype.onFolderRemove=function(e){var t=this;this.confirm("Are you sure?","Delete",(function(o){o&&t.__itemsRemove([{type:"folder",name:e.name,path:e.path,sourceName:e.sourceName}])})).bindDestruct(this)},t.prototype.onFolderCreate=function(e){var t=this;this.prompt("Enter Directory name","Create directory",(function(o){var n=e.path||"/";t.dataProvider.createFolder(o,e.path||"/",e.sourceName).then((function(){t.state.currentSource===e.sourceName&&t.state.currentPath===n?t.e.fire("update.filebrowser"):(t.state.currentSource=e.sourceName,t.state.currentPath=n),t.historyManager.updateCurrent()}),t.status)}),this.i18n("type name")).bindDestruct(this)},t.prototype.onFileRename=function(e){var t=this,o=e.file||e.name||"";1===this.state.activeElements.length&&o&&this.prompt("Enter new name","Rename",(function(e){if(!(0,a.isValidName)(e))return t.status(t.i18n("Enter new name")),!1;t.dataProvider.fileRename(t.state.currentPath,o,e,t.state.currentSource).then((function(e){t.state.activeElements=[],t.status(e,!0),t.loadingManager.loadItems()})).catch(t.status)}),this.i18n("type name"),o).bindDestruct(this)},t.prototype.onChooseItems=function(){var e=this.stateManager.state.activeElements;if(e.length){if("folder"===e[0].type)return this.state.currentPath=this.state.currentPath+"/"+e[0].name,this.state.currentSource=e[0].sourceName,void this.e.fire("afterOpenFolder.filebrowser");this.state.onSelectCallBack?this.stateManager.callSelectHandler():this.onOpenLightBox(e[0])}},t.prototype.onOpenLightBox=function(e){C.UILightBox.open(this,e,this.state.elements)},t.prototype.initUploader=function(){var e=this,t=this,o=(0,a.ConfigProto)(t.o.uploader||{},p.Config.defaultOptions.uploader),n=function(){return e.loadingManager.loadItems()};t.uploader=t.getInstance("Uploader",o),t.uploader.bind(t.panel.container,n,t.status),t.e.on("bindUploader.filebrowser",(function(e){t.uploader.bind(e,n,t.status)}))},t.prototype.destruct=function(){this.removeGlobalListeners(),this.header.destruct(),this.panel.destruct(),e.prototype.destruct.call(this)},t.prototype.fullFillOptions=function(){var e=this;["getLocalFileByUrl","crop","resize","create","fileMove","folderMove","fileRename","folderRename","fileRemove","folderRemove","folder","items","permissions"].forEach((function(t){null!=e.options[t]&&(e.options[t]=(0,a.ConfigProto)(e.options[t],e.o.ajax))}))},n.__decorate([c.autobind],t.prototype,"status",null),n.__decorate([(0,c.watch)(":resize",window)],t.prototype,"onResizeWindow",null),n.__decorate([(0,c.watch)(["state.currentPath","state.currentSource"])],t.prototype,"onChangePath",null),n.__decorate([(0,c.watch)("state.theme")],t.prototype,"onChangeTheme",null),n.__decorate([(0,c.watch)(":toggleSettings.filebrowser")],t.prototype,"onToggleSettings",null),n.__decorate([c.autobind],t.prototype,"onKeyPress",null),n.__decorate([c.autobind],t.prototype,"removeGlobalListeners",null),n.__decorate([(0,c.watch)(":fileRemove.filebrowser")],t.prototype,"onFileRemove",null),n.__decorate([(0,c.watch)(":edit.filebrowser")],t.prototype,"onFileEdit",null),n.__decorate([(0,c.watch)(":folderRename.filebrowser")],t.prototype,"onFolderRename",null),n.__decorate([(0,c.watch)(":folderRemove.filebrowser")],t.prototype,"onFolderRemove",null),n.__decorate([(0,c.watch)(":folderCreate.filebrowser")],t.prototype,"onFolderCreate",null),n.__decorate([(0,c.watch)(":fileRename.filebrowser")],t.prototype,"onFileRename",null),n.__decorate([(0,c.watch)(":select.filebrowser")],t.prototype,"onChooseItems",null),n.__decorate([(0,c.watch)(":openLightBox.filebrowser")],t.prototype,"onOpenLightBox",null),n.__decorate([c.component,(0,c.derive)(m.Dlgs)],t)}(i.Dialog);t.FileBrowserPro=P,Object.defineProperty(b.Jodit.modules,"FileBrowserPro",{value:P,writable:!1,enumerable:!0,configurable:!0})},12980:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(43854);(0,o(78855).extendLang)(o(91190));var r=n.Config.prototype.controls.filebrowser;r.settings={icon:"settings",tooltip:"Settings",exec:function(e){var t;(null!==(t=e.parent)&&void 0!==t?t:e).e.fire("toggleSettings.filebrowser")}},r.home={icon:"home",tooltip:"Home",exec:function(e){e.e.fire("goHome.filebrowser")}},r.preview={icon:"eye",tooltip:"Preview",isDisabled:function(e){return 0===e.state.activeElements.length},exec:function(e){e.e.fire("togglePreview.filebrowser")}},r.next={icon:"angle-right",tooltip:"History next",isDisabled:function(e){return!e.historyManager.canNext()},exec:function(e){e.historyManager.next()}},r.previous={icon:"angle-left",tooltip:"History previous",isDisabled:function(e){return!e.historyManager.canPrevious()},exec:function(e){e.historyManager.previous()}},r["new-folder"]={icon:"new-folder",exec:function(e){e.e.fire("folderCreate.filebrowser",{path:e.state.currentPath,sourceName:e.state.currentSource})},tooltip:"New folder"},Object.assign(n.Config.prototype.filebrowser,{buttons:["filebrowser.home","filebrowser.previous","filebrowser.next","|","filebrowser.upload","filebrowser.new-folder","filebrowser.remove","filebrowser.update","filebrowser.select","filebrowser.edit","|","filebrowser.preview","about"],sort:!1,pixelOffsetLoadNewChunk:300,width:800,height:400,previewOfficeURL:"https://view.officeapps.live.com/op/view.aspx?src="})},4312:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finder=void 0;var n=o(70655),r=o(10818),i=o(18574),s=o(97029);o(12980);var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requires=["license"],t.hasStyle=!s.Jodit.fatMode,t}return n.__extends(t,e),t.prototype.afterInit=function(e){var t=this;e.e.on("getInstanceFileBrowser",(function(e){return t.__instance||(t.__instance=new i.FileBrowserPro(e)),t.__instance}))},t.prototype.beforeDestruct=function(e){var t;e.e.off("getInstanceFileBrowser"),null===(t=this.__instance)||void 0===t||t.destruct()},t}(r.Plugin);t.finder=a,s.Jodit.plugins.add("finder",a)},58866:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenuManager=void 0;var n=o(70655),r=o(75164),i=o(29377),s=o(11975),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.className=function(){return"ContextMenuManager"},t.prototype.onFolderContext=function(e,t){return this.buildContextItemMenu(this.getFolderContextActions(e),t),!1},t.prototype.onItemContext=function(e,t,o){return this.buildContextItemMenu(this.getItemContextActions(e),o),!1},t.prototype.onSourceContext=function(e,t){return this.buildContextItemMenu(this.getSourceContextActions(e),t),!1},t.prototype.buildContextItemMenu=function(e,t){if(this.j.o.contextMenu){var o=(0,r.makeContextMenu)(this.j).setMod("theme",this.j.state.theme);o.show(t.clientX,t.clientY,e.filter((function(e){return e&&!1!==e.enabled}))),this.j.e.on(this.j,"afterClose",(function(){o.isOpened&&o.close()}))}},t.prototype.getItemContextActions=function(e){var t=this;if(this.j.stateManager.isActive(e)||this.j.stateManager.addActive(e,this.j.state.activeElements.length>1),"folder"===e.type)return this.getFolderContextActions({type:"directory",children:[],name:e.name||"",path:e.path,sourceName:e.sourceName});var o=this.j.options,n=this.j.dataProvider,r=1===this.j.state.activeElements.length;return[{icon:"pencil",title:"Edit",enabled:Boolean(e.isImage)&&o.editImage&&r&&(n.canI("ImageResize")||n.canI("ImageCrop")),exec:function(){t.j.e.fire("edit.filebrowser")}},{icon:"italic",title:"Rename",enabled:n.canI("FileRename")&&r,exec:function(){return t.j.e.fire("fileRename.filebrowser",e)}},{icon:"bin",title:"Delete",enabled:n.canI("FileRemove"),exec:function(){return t.j.e.fire("fileRemove.filebrowser",e)}},{icon:"eye",title:"Preview",enabled:Boolean(e.isImage||"file"===e.type)&&o.preview&&r,exec:function(){return t.j.e.fire("openLightBox.filebrowser",e)}},{icon:"upload",title:"Download",exec:function(){e.fileURL&&t.j.ow.open(e.fileURL)}}]},t.prototype.getFolderContextActions=function(e){var t=this,o=this.j.dataProvider;return[{icon:"pencil",title:"Rename",exec:function(){t.j.e.fire("folderRename.filebrowser",e)},enabled:o.canI("FolderRename")},{icon:"bin",title:"Delete",exec:function(){t.j.e.fire("folderRemove.filebrowser",e)},enabled:o.canI("FolderRemove")},{icon:"plus",title:"Add folder",exec:function(){t.j.e.fire("folderCreate.filebrowser",e)},enabled:o.canI("FolderCreate")}]},t.prototype.getSourceContextActions=function(e){var t=this;return[{icon:"plus",title:"Create folder",exec:function(){t.j.e.fire("folderCreate.filebrowser",e)}}]},n.__decorate([(0,s.watch)(":contextmenuFolder.filebrowser")],t.prototype,"onFolderContext",null),n.__decorate([(0,s.watch)(":contextmenuItem.filebrowser")],t.prototype,"onItemContext",null),n.__decorate([(0,s.watch)(":contextmenuSource.filebrowser")],t.prototype,"onSourceContext",null),n.__decorate([s.component],t)}(i.ViewComponent);t.ContextMenuManager=a},30332:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parentPath=void 0,t.parentPath=function(e){var t=e.split("/").filter((function(e){return e.length}));return t.pop(),t.join("/")||"/"}},61104:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryManager=void 0;var n=o(70655),r=o(47643),i=o(29377),s=o(11975),a=function(e){function t(t,o){var n=e.call(this,t)||this;return n.state=o,n.history=[],n.historyIndex=0,n}return n.__extends(t,e),t.prototype.className=function(){return"HistoryManager"},t.prototype.canNext=function(){return this.history.length-1>this.historyIndex},t.prototype.canPrevious=function(){return this.historyIndex>0},t.prototype.push=function(e){var t=this.historyIndex,o=this.history[t];if(!o||o.currentSource!==e.currentSource||o.currentPath!==e.currentPath){var r=n.__spreadArray([],n.__read(this.history),!1);r.length-1!==t&&(r=r.slice(0,t+1)),r.push(e),o&&(t+=1),this.history=r,this.historyIndex=t}},t.prototype.next=function(){this.canNext()&&(this.historyIndex+=1,this.updateState())},t.prototype.previous=function(){this.canPrevious()&&(this.historyIndex-=1,this.updateState())},t.prototype.updateCurrent=function(){this.history[this.historyIndex]={currentSource:this.state.currentSource,currentPath:this.state.currentPath,tree:(0,r.fastClone)(this.state.tree),elements:n.__spreadArray([],n.__read(this.state.elements),!1)}},t.prototype.onHome=function(){this.state.currentPath="",this.state.currentSource="",this.j.e.fire("afterOpenFolder.filebrowser update.filebrowser")},t.prototype.onOpenFolder=function(){this.push({tree:[],elements:[],currentPath:this.state.currentPath,currentSource:this.state.currentSource}),this.j.e.fire("changeSelection")},t.prototype.updateState=function(){var e=this.history[this.historyIndex],t=e.tree,o=e.elements,r=e.currentSource,i=e.currentPath;this.state.activeElements=[],this.state.elements=n.__spreadArray([],n.__read(o),!1),this.state.tree=n.__spreadArray([],n.__read(t),!1),this.state.currentSource=r,this.state.currentPath=i,this.j.e.fire("changeSelection")},n.__decorate([(0,s.watch)(["state.elements","state.tree"])],t.prototype,"updateCurrent",null),n.__decorate([(0,s.watch)(":goHome.filebrowser")],t.prototype,"onHome",null),n.__decorate([(0,s.watch)(":afterOpenFolder.filebrowser")],t.prototype,"onOpenFolder",null),n.__decorate([s.component],t)}(i.ViewComponent);t.HistoryManager=a},34653:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingManager=void 0;var n=o(70655),r=o(29377),i=o(11975),s=function(e){function t(t,o){var n=e.call(this,t)||this;return n.state=o,n.__tick=0,n.offset=0,n.countInOneChunk=20,n.stopLoadingParts=!1,n.__isLoadingPart=!1,n.__callQueueCount=0,n}return n.__extends(t,e),t.prototype.className=function(){return"LoadingManager"},t.prototype.onUpdateFileBrowser=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return this.state.activeElements=[],this.j.panel.setMod("loading",!0),[4,Promise.all([this.loadFolders(),this.loadItems()])];case 1:return e.sent(),this.j.panel.setMod("loading",!1),[2]}}))}))},t.prototype.loadFolders=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t,o,r,i;return n.__generator(this,(function(n){switch(n.label){case 0:if(!this.j.isOpened)return[2];t=(e=this.state).currentPath,o=e.currentSource,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.j.dataProvider.tree(t,o)];case 2:return r=n.sent(),this.j.stateManager.fillTreeForPath(r,t),this.state.sources=r,[3,4];case 3:return i=n.sent(),this.j.status(i),[3,4];case 4:return[2]}}))}))},t.prototype.loadItems=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t,o,r;return n.__generator(this,(function(n){switch(n.label){case 0:if(!this.j.isOpened)return[2];n.label=1;case 1:return n.trys.push([1,8,,9]),this.__tick+=1,e=this.__tick,this.offset=0,this.stopLoadingParts=!1,this.__callQueueCount=0,[4,a(this.state,this.j.dataProvider,this.offset,this.countInOneChunk)];case 2:return t=n.sent(),o=t.loadedTotal,this.state.elements=t.items,this.stopLoadingParts=this.countInOneChunk>o,[4,this.loadItemsChunk(e)];case 3:return n.sent(),[4,this.async.requestIdlePromise()];case 4:if(n.sent(),this.__tick!==e)return[2];n.label=5;case 5:return this.stopLoadingParts||this.state.elements.length>this.j.panel.countInColumn*this.j.panel.countInRow?[3,7]:[4,this.loadItemsChunk(e)];case 6:return n.sent(),this.__tick!==e?[2]:[3,5];case 7:return[3,9];case 8:return r=n.sent(),this.j.status(r),[3,9];case 9:return[2]}}))}))},t.prototype.__loadItemsChunk=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t,o,r,i;return n.__generator(this,(function(n){switch(n.label){case 0:if(this.__isLoadingPart)return this.__callQueueCount+=1,[2];if(this.stopLoadingParts)return this.__callQueueCount=0,[2];this.__isLoadingPart=!0,this.j.panel.items.setMod("chunk-loading",!0),n.label=1;case 1:return n.trys.push([1,3,,4]),this.offset+=this.countInOneChunk,[4,a(this.state,this.j.dataProvider,this.offset,this.countInOneChunk)];case 2:return t=n.sent(),o=t.items,r=t.loadedTotal,this.__tick!==e?[2]:(this.stopLoadingParts=this.countInOneChunk>r,o.length&&(this.state.elements=this.state.elements.concat(o)),[3,4]);case 3:return i=n.sent(),this.j.status(i),[3,4];case 4:return this.j.panel.items.setMod("chunk-loading",!1),this.__isLoadingPart=!1,this.__callQueueCount>0?(this.__callQueueCount-=1,[2,this.__loadItemsChunk(e)]):[2]}}))}))},t.prototype.loadItemsChunk=function(e){return void 0===e&&(e=this.__tick),e!==this.__tick?Promise.resolve():this.__loadItemsChunk(e)},n.__decorate([(0,i.watch)(":update.filebrowser")],t.prototype,"onUpdateFileBrowser",null),n.__decorate([(0,i.watch)(["state.currentPath","state.currentSource"]),(0,i.debounce)((function(e){return{timeout:e.defaultTimeout,promisify:!0}}))],t.prototype,"loadFolders",null),n.__decorate([(0,i.watch)(["state.currentPath","state.currentSource","state.sortBy","state.onlyImages","state.foldersPosition","state.filterWord"]),(0,i.debounce)((function(e){return{timeout:e.defaultTimeout,promisify:!0}}))],t.prototype,"loadItems",null),n.__decorate([(0,i.debounce)((function(e){return{timeout:e.defaultTimeout,promisify:!0}}))],t.prototype,"loadItemsChunk",null),n.__decorate([i.component],t)}(r.ViewComponent);function a(e,t,o,n){return t.itemsEx(e.currentPath,e.currentSource,{offset:o,limit:n,sortBy:e.sortBy,withFolders:e.withFolders,foldersPosition:e.foldersPosition,onlyImages:e.onlyImages,filterWord:e.filterWord})}t.LoadingManager=s},28544:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PersistentStore=void 0;var n=o(70655),r=o(29377),i=o(11975),s=o(10115),a=function(e){function t(t,o){var n=e.call(this,t)||this;return n.state=o,n.sortBy="changed-desc",n.view="tiles",n.foldersPosition="top",n.tileSize="default",n.favorites=[],n.showSideBar=!0,n.showPreview=!1,n.showFavorites=!0,n}return n.__extends(t,e),t.prototype.className=function(){return"PersistentStore"},t.prototype.onChangeThemeSetField=function(){this.theme=this.state.theme},t.prototype.onChangeView=function(){this.view=this.state.view},t.prototype.onChangeSortBy=function(){this.sortBy=this.state.sortBy},t.prototype.onChangeTileSize=function(){this.tileSize=this.state.tileSize},t.prototype.onChangeFavorites=function(){this.favorites=this.state.favorites},t.prototype.onChangeShowSideBar=function(){this.showSideBar=this.state.showSideBar},t.prototype.onChangeShowPreview=function(){this.showPreview=this.state.showPreview},t.prototype.onChangeShowFavorites=function(){this.showFavorites=this.state.showFavorites},t.prototype.onChangeFoldersPosition=function(){this.foldersPosition=this.state.foldersPosition},t.prototype.syncWithState=function(){this.state.tileSize=this.tileSize,this.state.favorites=this.favorites.map((function(e){return e instanceof s.FileBrowserItem?e:s.FileBrowserItem.create(e)})),this.state.view=this.view,this.state.theme=this.theme,this.state.showSideBar=this.showSideBar,this.state.showPreview=this.showPreview,this.state.showFavorites=this.showFavorites,this.state.sortBy=this.sortBy,this.state.foldersPosition=this.foldersPosition},n.__decorate([i.persistent],t.prototype,"theme",void 0),n.__decorate([i.persistent],t.prototype,"sortBy",void 0),n.__decorate([i.persistent],t.prototype,"view",void 0),n.__decorate([i.persistent],t.prototype,"foldersPosition",void 0),n.__decorate([i.persistent],t.prototype,"tileSize",void 0),n.__decorate([i.persistent],t.prototype,"favorites",void 0),n.__decorate([i.persistent],t.prototype,"showSideBar",void 0),n.__decorate([i.persistent],t.prototype,"showPreview",void 0),n.__decorate([i.persistent],t.prototype,"showFavorites",void 0),n.__decorate([(0,i.watch)("state.theme")],t.prototype,"onChangeThemeSetField",null),n.__decorate([(0,i.watch)("state.view")],t.prototype,"onChangeView",null),n.__decorate([(0,i.watch)("state.sortBy")],t.prototype,"onChangeSortBy",null),n.__decorate([(0,i.watch)("state.tileSize")],t.prototype,"onChangeTileSize",null),n.__decorate([(0,i.watch)("state.favorites")],t.prototype,"onChangeFavorites",null),n.__decorate([(0,i.watch)("state.showSideBar")],t.prototype,"onChangeShowSideBar",null),n.__decorate([(0,i.watch)("state.showPreview")],t.prototype,"onChangeShowPreview",null),n.__decorate([(0,i.watch)("state.showFavorites")],t.prototype,"onChangeShowFavorites",null),n.__decorate([(0,i.watch)("state.foldersPosition")],t.prototype,"onChangeFoldersPosition",null),n.__decorate([i.component],t)}(r.ViewComponent);t.PersistentStore=a},34522:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateManager=void 0;var n=o(70655),r=o(11975),i=function(){function e(e){this.state=e}return e.prototype.getIndex=function(e,t){return void 0===t&&(t=this.state.elements),t.findIndex((function(t){return t.uniqueHashKey===e.uniqueHashKey}))},e.prototype.isActive=function(e){return Boolean(this.state.activeElements.find((function(t){return t.uniqueHashKey===e.uniqueHashKey})))},e.prototype.isFavorite=function(e){return Boolean(this.state.favorites.find((function(t){return t.uniqueHashKey===e.uniqueHashKey})))},e.prototype.addActive=function(e,t){var o;this.state.metaInfo=e,this.state.info=null!==(o=e.file)&&void 0!==o?o:"",this.state.lastSelectedIndex=this.getIndex(e),this.state.activeElements=t?n.__spreadArray(n.__spreadArray([],n.__read(this.state.activeElements),!1),[e],!1):[e]},e.prototype.callSelectHandler=function(){var e,t=this.state.activeElements;null===(e=this.state.onSelectCallBack)||void 0===e||e.call(this,{baseurl:"",files:t.map((function(e){return e.fileURL})),isImages:t.map((function(e){return Boolean(e.isImage)}))})},e.prototype.setFilter=function(e){this.state.filterWord=e},e.prototype.toggleFavorite=function(e){var t=this.getIndex(e,this.state.favorites),o=n.__spreadArray([],n.__read(this.state.favorites),!1);-1===t?o.push(e):o.splice(t,1),this.state.favorites=o},e.prototype.fillTreeForPath=function(e,t){var o=this;this.state.tree.length&&t&&"/"!==t?(this.removeActive(this.state.tree),e.forEach((function(e){var n=s(o.state.tree,e.name);n||(n=c(e),o.state.tree.push(n)),n.isActive=!0;var r=function(e,t){return e.split("/").reduce((function(e,t){return e&&s(e.children,t)}),t)}(t,n);r&&(r.isActive=!0,r.children=a(e.folders).map((function(o){return l(o,t+"/"+o,e.name)})))})),this.state.tree=n.__spreadArray([],n.__read(this.state.tree),!1)):this.state.tree=e.map(c)},e.prototype.removeActive=function(e){var t=this;e.forEach((function(e){e.isActive=!1,t.removeActive(e.children)}))},Object.defineProperty(e.prototype,"isFavoriteItems",{get:function(){return this.state.favorites===this.state.elements},enumerable:!1,configurable:!0}),n.__decorate([r.autobind],e.prototype,"getIndex",null),n.__decorate([r.autobind],e.prototype,"isActive",null),n.__decorate([r.autobind],e.prototype,"isFavorite",null),e}();function s(e,t){var o;return null!==(o=e.find((function(e){return e.name===t})))&&void 0!==o?o:null}function a(e){return e.filter((function(e){return"."!==e&&".."!==e}))}function c(e){return{type:"source",name:e.name,title:e.title,sourceName:e.name,path:"/",children:a(e.folders).map((function(t){return l(t,t,e.name)}))}}function l(e,t,o){return{type:"directory",name:e,path:t,sourceName:o,children:[]}}t.StateManager=i},91190:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ru=void 0;var n=o(99425);t.ru=n},76973:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(98813),r=o(21601),i=o(67101),s=o(34839);n.Icon.set("heart",String(r)),n.Icon.set("home",String(i)),n.Icon.set("new-folder",String(s))},89861:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIBrowserFolder=void 0;var n=o(70655);o(6337);var r=o(98813),i=o(11975),s=o(47643),a=function(e){function t(t,o){var n=e.call(this,t)||this;n.item=o,n.syncMod=!0;var r=n.getElm("name");return(0,s.assert)(null!=r,"name element does not exists"),r.innerText=o.name,t.e.on(n.container,"click",(function(){return n.getMod("active")||n.setMod("loading",!0),t.e.fire("openFolder",o)})).on(n.container,"contextmenu",(function(e){return t.e.fire("contextmenuFolder.filebrowser",o,e)})),n}return n.__extends(t,e),t.prototype.className=function(){return"UIBrowserFolder"},t.prototype.render=function(){return'<div>\n\t\t\t<div class="&__icon">\n\t\t\t\t<div class=\'&__loader\'></div>\n\t\t\t\t<div class="&__icon-wrapper">\n\t\t\t\t\t*folder*\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="&__name"></div>\n\t\t\t<div class="&__arrow">*angle-right*</div>\n\t\t</div>'},n.__decorate([i.component],t)}(r.UIElement);t.UIBrowserFolder=a},64614:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIBrowserHeader=void 0;var n=o(70655);o(80355);var r=o(98813),i=o(11975),s=o(30446),a=o(20405),c=function(e){function t(t,o,n){var i=e.call(this,t)||this;return i.options=o,i.stateManager=n,i.syncMod=!0,i.toolbar=(0,s.makeCollection)(i.j),i.filter=new r.UIInput(i.j,{icon:"search",placeholder:"Filter",clearButton:!0,onChange:function(e){i.stateManager.setFilter(e)}}),i.append(i.toolbar).append(i.filter),i.filter.container.classList.add(i.getFullElName("filter")),i.toolbar.setMod("mode","header").build(i.__getButtons()),i}return n.__extends(t,e),t.prototype.className=function(){return"UIBrowserHeader"},t.prototype.__getButtons=function(){var e,t=this;return(null!==(e=this.options.toolbarButtons)&&void 0!==e?e:[]).filter((function(e){if(!(0,a.isString)(e))return!0;switch(e){case"filebrowser.edit":return t.j.dataProvider.canI("ImageResize")||t.j.dataProvider.canI("ImageCrop");case"filebrowser.new-folder":return t.j.dataProvider.canI("FolderCreate");case"filebrowser.upload":return t.j.dataProvider.canI("FileUpload");case"filebrowser.remove":return t.j.dataProvider.canI("FileRemove")}return!0}))},n.__decorate([i.component],t)}(r.UIGroup);t.UIBrowserHeader=c},17971:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIBrowserItem=void 0;var n=o(70655);o(80744);var r=o(98813),i=o(11975),s=o(10115),a=o(27830),c=o(47643),l=o(47643),u=function(e){function t(t,o){var n=e.call(this,t)||this;return n.item=s.FileBrowserItem.create(o),t.e.on(n.container,"click contextmenu dblclick",(function(e){return t.e.fire(e.type+"Item.filebrowser",n.item,(0,c.ctrlKey)(e)||e.shiftKey,e),!1})),n}return n.__extends(t,e),t.prototype.className=function(){return"UIBrowserItem"},t.prototype.render=function(){return"<div tabindex='-1'>\n\t\t\t<div class='&__image'></div>\n\t\t\t<div class='&__info'></div>\n\t\t\t<div class='&__heart'>*heart*</div>\n\t\t</div>"},t.prototype.onClickFavorite=function(){var e=this;return this.bubble((function(t){e.jodit.e.fire(t,"toggleFavoriteItem",e.item)})),!1},t.prototype.onAction=function(e){return this.jodit.e.fire(e.type+"Item.filebrowser",this.item,(0,c.ctrlKey)(e)||e.shiftKey,e),!1},t.prototype.update=function(){var t=this.getElm("image");(0,l.assert)(null!=t,"image element does not exists"),(0,c.css)(t,"backgroundImage","url(".concat(encodeURI(this.item.imageURL),")"));var o=this.item,n=o.type,r=o.file,i=o.time,s=o.size;this.setMod("is-file",!1===this.item.isImage).setMod("type",null!=n?n:"file").setElementValue("name",r).setElementValue("time",i).setElementValue("filesize",s),(0,c.attr)(this.container,"title","folder"!==n?"".concat(r," ").concat(i," ").concat(s):r),e.prototype.update.call(this)},t.prototype.setElementValue=function(e,t){var o=this.getFullElName(e),n=this.getElm(e);if(!t)return n&&a.Dom.safeRemove(n),this;if(!n){var r=this.getElm("info");(0,l.assert)(null!=r,"wrapper element does not exist"),n=this.j.create.div(o),r.appendChild(n)}return n.innerText=t,this},n.__decorate([(0,i.watch)("heart:click")],t.prototype,"onClickFavorite",null),n.__decorate([(0,i.watch)(["container:click","container:contextmenu","container:dblclick"])],t.prototype,"onAction",null),n.__decorate([i.component],t)}(r.UIElement);t.UIBrowserItem=u},5662:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UILightBox=void 0;var n=o(70655);o(35850);var r=o(27830),i=o(11975),s=o(47643),a=o(36257),c=o(47643),l=function(e){function t(t,o,n){var i=e.call(this,t)||this;i.current=o,i.elements=n,i.dialog=new r.Dialog;var s=i.dialog;return s.setMod("theme",t.state.theme).toolbar.setMod("mode","header"),s.open(i),i.elements=i.elements.filter((function(e){return e.isImage})),s.e.on(s,"afterClose",(function(){i.destruct()})),i.addGlobalListeners(),i.onChangeCurrent(),s.toolbar.build([{icon:"check",exec:function(){t.stateManager.addActive(i.current,!1),t.e.fire("select.filebrowser"),s.close()}},"dialog.close"]),i}var o;return n.__extends(t,e),o=t,t.prototype.className=function(){return"UILightBox"},t.prototype.render=function(){return"<div>\n\t\t\t<div class='&__previous'>*angle-left*</div>\n\t\t\t<div class='&__preview'></div>\n\t\t\t<div class='&__loader'></div>\n\t\t\t<div class='&__next'>*angle-right*</div>\n\t\t</div>"},t.prototype.onChangeCurrent=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t,o,i;return n.__generator(this,(function(n){switch(n.label){case 0:return e=this.current,this.setMod("loading",!0),t=this.getElm("preview"),(0,c.assert)(null!=t,"preview element does not exist"),r.Dom.detach(t),(0,s.css)(t,{backgroundImage:null}),e.isImage?[4,(0,s.loadImage)(e.fileURL,this.j)]:[3,2];case 1:return o=n.sent(),this.dialog.setPosition(),(0,s.css)(t,{width:Math.min(this.jodit.ow.innerWidth,o.naturalWidth),height:Math.min(this.jodit.ow.innerHeight-100,o.naturalHeight),backgroundImage:"url(".concat(o.src,")")}),[3,4];case 2:return[4,this.makeIframe(e.fileURL)];case 3:i=n.sent(),t.appendChild(i),n.label=4;case 4:return this.dialog.setSize(),this.dialog.setPosition(),this.setMod("loading",!1),[2]}}))}))},t.prototype.makeIframe=function(e){var t=this.j.c.element("iframe");return t.classList.add(this.getFullElName("office-iframe")),t.src=/\.pdf/.test(e)?e:this.j.o.previewOfficeURL+encodeURIComponent(e),t},t.prototype.onPreviousClick=function(){var e=this.j.stateManager.getIndex(this.current,this.elements);e>0?e-=1:e=this.elements.length-1,this.current=this.elements[e]},t.prototype.onNextClick=function(){var e=this.j.stateManager.getIndex(this.current,this.elements);this.elements.length-1>e?e+=1:e=0,this.current=this.elements[e]},t.open=function(e,t,n){return new o(e,t,n)},t.prototype.addGlobalListeners=function(){this.j.e.on(this.j.od,"keydown",this.onKeyPress)},t.prototype.onKeyPress=function(e){if(e.key===a.KEY_LEFT||e.key===a.KEY_RIGHT||e.key===a.KEY_SPACE)return e.key===a.KEY_LEFT?this.onPreviousClick():this.onNextClick(),!1},t.prototype.removeGlobalListeners=function(){this.j.e.off(this.j.od,"keydown",this.onKeyPress)},t.prototype.destruct=function(){return this.removeGlobalListeners(),this.dialog.destruct(),e.prototype.destruct.call(this)},n.__decorate([(0,i.watch)("current")],t.prototype,"onChangeCurrent",null),n.__decorate([(0,i.watch)("previous:click")],t.prototype,"onPreviousClick",null),n.__decorate([(0,i.watch)("next:click")],t.prototype,"onNextClick",null),n.__decorate([i.autobind],t.prototype,"onKeyPress",null),o=n.__decorate([i.component],t)}(r.UIElement);t.UILightBox=l},29653:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIBrowserPanel=void 0;var n=o(70655);o(73570);var r=o(98813),i=o(53737),s=o(11975),a=o(10239),c=o(57187),l=o(47643),u=o(71584),h=o(19485),d=o(73347),p=function(e){function t(t,o){var n=e.call(this,t)||this;return n.stateManager=o,n.syncMod=!0,n.sources=new u.UIBrowserSources(n.j),n.sidebar=new a.UISidebar(n.jodit,[n.sources],n.stateManager.state),n.preview=new d.UIPreview(n.jodit,n.stateManager.state),n.statusbar=new h.UIBrowserStatusBar(n.j),n.items=new i.UIVirtualScroll(n.j,n.stateManager),n.settings=new c.UIBrowserSettings(n.jodit,n.stateManager.state),n.state=o.state,n.append(n.sidebar,"content"),n.append(n.items,"content"),n.append(n.settings,"content"),n.append(n.preview,"content"),n.append(n.statusbar,"footer"),n.onChangeElements(),n.onChangeSources(),n.onChangeView(),n.onChangeTileSize(),n.onChangeShowFavorites(),n.onChangeActiveElements(),n.onChangeFavorites(),n.onChangeShowSideBar(),n.onChangeShowSettings(),n.onChangeShowPreview(),n.onChangeTheme(),n}return n.__extends(t,e),t.prototype.className=function(){return"UIBrowserPanel"},Object.defineProperty(t.prototype,"countInRow",{get:function(){if("list"===this.state.view)return 1;if(!this.items.elements.length)return 1;var e=this.items.elements[0].container,t=(0,l.css)(e,"marginLeft");return Math.floor(this.items.container.offsetWidth/(e.offsetWidth+((0,l.isNumber)(t)?t:0)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"countInColumn",{get:function(){if(!this.items.elements.length)return 1;var e=this.items.elements[0].container,t=(0,l.css)(e,"marginTop");return Math.floor(this.items.container.offsetHeight/(e.offsetHeight+((0,l.isNumber)(t)?t:0)))},enumerable:!1,configurable:!0}),t.prototype.render=function(){return"<div>\n\t\t\t<div class='&__content'></div>\n\t\t\t<div class='&__footer'></div>\n\t\t</div>"},t.prototype.onChangeTheme=function(){this.setMod("theme",this.stateManager.state.theme)},t.prototype.onChangeElements=function(){this.items.build(this.stateManager.state.elements)},t.prototype.onChangeActiveElements=function(){var e=this;this.state.activeElements.length||(this.state.info="",this.state.metaInfo=null),this.items.elements.forEach((function(t){t.setMod("active",Boolean(e.stateManager.isActive(t.item)))})),this.j.e.fire("changeSelection")},t.prototype.onChangeFavorites=function(){var e=this;this.items.elements.forEach((function(t){t.setMod("favorite",Boolean(e.stateManager.isFavorite(t.item)))}))},t.prototype.onChangeSources=function(){this.sources.build(this.stateManager.state.tree)},t.prototype.onChangeLastSelectedIndex=function(){var e,t=null===(e=this.items.elements[this.stateManager.state.lastSelectedIndex])||void 0===e?void 0:e.container;t&&((0,l.scrollIntoViewIfNeeded)(t,this.items.container,this.j.od),t.focus())},t.prototype.onChangeInfo=function(){this.statusbar.value(this.state.info,"center")},t.prototype.onChangePathOrSource=function(){this.statusbar.value(this.state.currentPath?"".concat(this.state.currentPath," (").concat(this.state.currentSource,")"):this.i18n("Home"),"left")},t.prototype.onChangeShowSettings=function(){this.settings.setMod("hidden",!this.stateManager.state.showSettings)},t.prototype.onChangeShowPreview=function(){this.preview.setMod("hidden",!this.stateManager.state.showPreview)},t.prototype.onChangeShowSideBar=function(){this.sidebar.setMod("hidden",!this.stateManager.state.showSideBar)},t.prototype.onChangeView=function(){this.items.setMod("view",this.stateManager.state.view)},t.prototype.onChangeTileSize=function(){this.items.setMod("size",this.stateManager.state.tileSize)},t.prototype.onChangeShowFavorites=function(){this.sidebar.setMod("show-favorites",this.stateManager.state.showFavorites),this.items.setMod("show-favorites",this.stateManager.state.showFavorites)},t.prototype.onItemDblClick=function(){return this.j.e.fire("select.filebrowser"),!1},t.prototype.onItemClick=function(e,t){this.stateManager.addActive(e,t)},t.prototype.onTogglePreview=function(){return this.state.showPreview=!this.state.showPreview,!1},t.prototype.onToggleFavoriteItem=function(e){this.stateManager.toggleFavorite(e)},t.prototype.onFolderClick=function(e){this.stateManager.state.currentSource=e.sourceName,this.stateManager.state.currentPath=e.path||"/",this.j.e.fire("afterOpenFolder.filebrowser")},n.__decorate([(0,s.watch)("state.theme")],t.prototype,"onChangeTheme",null),n.__decorate([(0,s.watch)("state.elements")],t.prototype,"onChangeElements",null),n.__decorate([(0,s.watch)("state.activeElements")],t.prototype,"onChangeActiveElements",null),n.__decorate([(0,s.watch)(["state.favorites","state.elements"])],t.prototype,"onChangeFavorites",null),n.__decorate([(0,s.watch)("state.sources")],t.prototype,"onChangeSources",null),n.__decorate([(0,s.watch)("state.lastSelectedIndex")],t.prototype,"onChangeLastSelectedIndex",null),n.__decorate([(0,s.watch)("state.info")],t.prototype,"onChangeInfo",null),n.__decorate([(0,s.watch)(["state.currentPath","state.currentSource"])],t.prototype,"onChangePathOrSource",null),n.__decorate([(0,s.watch)("state.showSettings")],t.prototype,"onChangeShowSettings",null),n.__decorate([(0,s.watch)("state.showPreview")],t.prototype,"onChangeShowPreview",null),n.__decorate([(0,s.watch)("state.showSideBar")],t.prototype,"onChangeShowSideBar",null),n.__decorate([(0,s.watch)("state.view")],t.prototype,"onChangeView",null),n.__decorate([(0,s.watch)("state.tileSize")],t.prototype,"onChangeTileSize",null),n.__decorate([(0,s.watch)("state.showFavorites")],t.prototype,"onChangeShowFavorites",null),n.__decorate([(0,s.watch)(":dblclickItem.filebrowser")],t.prototype,"onItemDblClick",null),n.__decorate([(0,s.watch)(":clickItem.filebrowser")],t.prototype,"onItemClick",null),n.__decorate([(0,s.watch)(":togglePreview.filebrowser")],t.prototype,"onTogglePreview",null),n.__decorate([(0,s.watch)(":toggleFavoriteItem")],t.prototype,"onToggleFavoriteItem",null),n.__decorate([(0,s.watch)(":openFolder")],t.prototype,"onFolderClick",null),n.__decorate([s.component],t)}(r.UIGroup);t.UIBrowserPanel=p},73347:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIPreview=void 0;var n=o(70655);o(6590);var r=o(98813),i=o(11975),s=o(64413),a=o(47643),c=o(97039),l=o(17971),u=o(47643),h=function(e){function t(t,o){var n=e.call(this,t)||this;return n.state=o,n.lastLoadPromise=null,n.onChangeMetaInfo(),n}return n.__extends(t,e),t.prototype.className=function(){return"UIPreview"},t.prototype.addResize=function(){s.UIResize.remove(this),s.UIResize.install(this,screen.width>450?"left":"top")},t.prototype.render=function(){return'<div>\n\t\t\t\t<div class="&__image"></div>\n\t\t\t\t<div class="&__info"></div>\n\t\t\t\t<div class="&__loader"></div>\n\t\t\t\t<div class="&__empty-message">~Select image~</div>\n\t\t\t</div>'},t.prototype.afterSetMod=function(t,o){"hidden"===t&&!1===o&&this.onChangeMetaInfo(),e.prototype.afterSetMod.call(this,t,o)},t.prototype.onChangeMetaInfo=function(){var e,t,o=this;if(!this.getMod("hidden")){var n=this.state.metaInfo;this.setMod("empty",!n);var r=this.getElm("info");(0,u.assert)(null!=r,"info element does not exists"),c.Dom.detach(r);var i=this.getElm("image");(0,u.assert)(null!=i,"image element does not exists"),(0,a.css)(i,{backgroundImage:null}),n&&(this.setMod("is-file",!1===n.isImage).setMod("type",null!==(e=n.type)&&void 0!==e?e:"file"),l.UIBrowserItem.prototype.setElementValue.call(this,"name",n.file),l.UIBrowserItem.prototype.setElementValue.call(this,"time",n.time),l.UIBrowserItem.prototype.setElementValue.call(this,"filesize",n.size),this.setMod("loading",!0),null===(t=this.lastLoadPromise)||void 0===t||t.rejectCallback(),this.lastLoadPromise=(0,a.loadImage)(n.isImage?n.fileURL:n.imageURL,this.j),this.lastLoadPromise.then((function(e){var t=o.getElm("image");(0,u.assert)(null!=t,"image element does not exist"),e&&(0,a.css)(t,{backgroundImage:"url(".concat(e.src,")")})})).finally((function(){o.setMod("loading",!1)})).catch((function(){})))}},n.__decorate([(0,i.hook)("ready"),(0,i.watch)(":resize",window),(0,i.debounce)()],t.prototype,"addResize",null),n.__decorate([(0,i.watch)("state.metaInfo")],t.prototype,"onChangeMetaInfo",null),n.__decorate([i.component],t)}(r.UIGroup);t.UIPreview=h},37538:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIProgress=void 0;var n=o(70655);o(49573);var r=o(98813),i=o(11975),s=function(e){function t(t,o){var n=e.call(this,t)||this;return n.state=o,n.onProgress(),n}return n.__extends(t,e),t.prototype.className=function(){return"UIProgress"},t.prototype.onProgress=function(){this.state.progress?this.show():this.hide(),this.progress(this.state.progress)},t.prototype.hide=function(){return this.setMod("hidden",!0),this},t.prototype.progress=function(e){var t=this;return this.container.style.width=e.toFixed(2)+"%",98>e||this.j.async.setTimeout((function(){t.hide()}),{label:"progress",timeout:300}),this},t.prototype.show=function(){return this.setMod("hidden",!1),this},n.__decorate([(0,i.watch)("state.progress")],t.prototype,"onProgress",null),n.__decorate([i.component],t)}(r.ProgressBar);t.UIProgress=s},57187:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIBrowserSettings=void 0;var n=o(70655);o(14001);var r=o(98813),i=o(11975),s=o(47643),a=function(e){function t(t,o){var n=e.call(this,t)||this;n.state=o;var r=n.getElm("close");return(0,s.assert)(null!=r,"close element does not exists"),t.e.on(r,"click",(function(){n.state.showSettings=!1})),n}return n.__extends(t,e),t.prototype.className=function(){return"UIBrowserSettings"},t.prototype.render=function(){return'<div>\n\t\t\t<div class="'.concat(this.getFullElName("close"),'">').concat(r.Icon.get("cancel"),'</div>\n\t\t\t<div class="').concat(this.getFullElName("title"),'">').concat(this.j.i18n("Settings"),'</div>\n\t\t\t<div class="').concat(this.getFullElName("options"),'"></div>\n\t\t</div>')},t.prototype.appendChildToContainer=function(e){var t=this.getElm("options");(0,s.assert)(null!=t,"options element does not exists"),t.appendChild(e)},t.prototype.afterSetMod=function(t,o){"hidden"===t&&!1===o&&this.generateSettings(),e.prototype.afterSetMod.call(this,t,o)},t.prototype.onChangeView=function(){var e=this.getElm("tile-size");e&&(e.style.display="tiles"===this.state.view?"block":"none")},t.prototype.generateSettings=function(){var e=this;this.clear();var t=this.j;this.append([new r.UIButtonGroup(t,{label:"Theme",name:"theme",value:this.state.theme,radio:!0,options:[{value:"default",text:"Light"},{value:"dark",text:"Dark"}],onChange:function(t){e.state.theme="default"===e.state.theme||"dark"===e.state.theme?t[0].value:"default"}}),new r.UIButtonGroup(t,{label:"Show favorites",name:"showFavorites",value:this.state.showFavorites,radio:!0,options:[{value:!0,text:"Show"},{value:!1,text:"Hide"}],onChange:function(t){e.state.showFavorites=t[0].value}}),new r.UIButtonGroup(t,{label:"View",name:"view",value:this.state.view,radio:!0,options:[{value:"tiles",text:"Tiles"},{value:"list",text:"List"},{value:"compact",text:"Compact"}],onChange:function(t){e.state.view=t[0].value}}),new r.UIButtonGroup(t,{label:"Folders position",name:"foldersPosition",value:this.state.foldersPosition,radio:!0,options:[{value:"top",text:"Top"},{value:"bottom",text:"Bottom"},{value:"default",text:"Default"}],onChange:function(t){e.state.foldersPosition=t[0].value}}),new r.UISelect(t,{label:"Sort by",name:"sort-by",value:this.state.sortBy,options:[{value:"changed-asc",text:t.i18n("Sort by changed")+"(⬆)"},{value:"changed-desc",text:t.i18n("Sort by changed")+"(⬇)"},{value:"name-asc",text:t.i18n("Sort by name")+"(⬆)"},{value:"name-desc",text:t.i18n("Sort by name")+"(⬇)"},{value:"size-asc",text:t.i18n("Sort by size")+"(⬆)"},{value:"size-desc",text:t.i18n("Sort by size")+"(⬇)"}],onChange:function(t){e.state.sortBy=t}}),new r.UISelect(t,{label:"Tile size",name:"tile-size",value:this.state.tileSize,options:[{value:"xsmall",text:"Extra small"},{value:"small",text:"Small"},{value:"default",text:"Default"},{value:"large",text:"Large"},{value:"xlarge",text:"Extra large"}],onChange:function(t){e.state.tileSize=t}})]),this.onChangeView()},n.__decorate([(0,i.watch)("state.view")],t.prototype,"onChangeView",null),n.__decorate([i.component],t)}(r.UIGroup);t.UIBrowserSettings=a},10239:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UISidebar=void 0;var n=o(70655);o(11785);var r=o(98813),i=o(11975),s=o(64413),a=o(47643),c=function(e){function t(t,o,n){var r=e.call(this,t,o)||this;return r.state=n,r.onChangeFavorites(),r}return n.__extends(t,e),t.prototype.className=function(){return"UISidebar"},t.prototype.render=function(){return"<div>\n\t\t\t<div class='&__hide-btn'>*angle-left*</div>\n\t\t\t<div class='&__favorites'>*heart* ~Favorites~</div>\n\t\t\t<div class='&__box'></div>\n\t\t</div>"},t.prototype.appendChildToContainer=function(e){var t=this.getElm("box");(0,a.assert)(null!=t,"box element does not exists"),t.appendChild(e)},t.prototype.addResize=function(){s.UIResize.remove(this),s.UIResize.install(this,screen.width>450?"right":"bottom")},t.prototype.onChangeFavorites=function(){this.setMod("has-favorites",Boolean(this.state.favorites.length))},t.prototype.onClickHideButton=function(){return this.state.showSideBar=!this.state.showSideBar,!1},t.prototype.onClickFavorites=function(){return this.state.elements=this.state.favorites,!1},n.__decorate([(0,i.hook)("ready"),(0,i.watch)(":resize",window),(0,i.debounce)()],t.prototype,"addResize",null),n.__decorate([(0,i.watch)("state.favorites")],t.prototype,"onChangeFavorites",null),n.__decorate([(0,i.watch)("hide-btn:click")],t.prototype,"onClickHideButton",null),n.__decorate([(0,i.watch)("favorites:click")],t.prototype,"onClickFavorites",null),n.__decorate([i.component],t)}(r.UIGroup);t.UISidebar=c},65104:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIBrowserSource=void 0;var n=o(70655);o(28389);var r=o(98813),i=o(11975),s=o(93659),a=o(47643),c=function(e){function t(t,o){var n=e.call(this,t,o)||this;n.data=o,n.tree=new s.UITree(n.j,n.data.children),n.syncMod=!0;var r=n.getElm("name");(0,a.assert)(null!=r,"name element does not exists"),r.innerText=o.title||o.name;var i=n.getElm("tree");return(0,a.assert)(null!=i,"tree element does not exists"),i.appendChild(n.tree.container),t.e.on(n.container,"contextmenu",(function(e){return t.e.fire("contextmenuSource.filebrowser",o,e)})),n}return n.__extends(t,e),t.prototype.className=function(){return"UIBrowserSource"},t.prototype.render=function(){return'<div>\n\t\t\t<div class="&__name"></div>\n\t\t\t<div class="&__tree"></div>\n\t\t</div>'},n.__decorate([i.component],t)}(r.UIElement);t.UIBrowserSource=c},71584:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIBrowserSources=void 0;var n=o(70655);o(31748);var r=o(98813),i=o(11975),s=o(65104),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.syncMod=!0,t}return n.__extends(t,e),t.prototype.className=function(){return"UIBrowserSources"},t.prototype.build=function(e){var t=this;this.clear(),e.forEach((function(e){t.append(new s.UIBrowserSource(t.jodit,e))}))},n.__decorate([i.component],t)}(r.UIGroup);t.UIBrowserSources=a},19485:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIBrowserStatusBar=void 0;var n=o(70655);o(87249);var r=o(98813),i=o(11975),s=o(47643),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.className=function(){return"UIBrowserStatusBar"},t.prototype.render=function(){return"<div>\n\t\t\t<div class='&__slot-left'></div>\n\t\t\t<div class='&__slot-center'></div>\n\t\t\t<div class='&__slot-right'></div>\n\t\t</div>"},t.prototype.value=function(e,t){void 0===t&&(t="left");var o=this.getElm("slot-".concat(t));return(0,s.assert)(null!=o,"Slot does not exists"),o.innerText=e,this},n.__decorate([i.component],t)}(r.UIElement);t.UIBrowserStatusBar=a},93659:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UITree=void 0;var n=o(70655);o(56952);var r=o(98813),i=o(11975),s=o(89861),a=function(e){function t(t,o){var n=e.call(this,t)||this;return n.syncMod=!0,n.build(o),n}var o;return n.__extends(t,e),o=t,t.prototype.className=function(){return"UITree"},t.prototype.build=function(e){var t=this;this.clear(),e.forEach((function(e){var n=new s.UIBrowserFolder(t.jodit,e);t.append(n),e.isActive&&n.setMod("active",!0),e.children.length&&t.append(new o(t.jodit,e.children))}))},o=n.__decorate([i.component],t)}(r.UIGroup);t.UITree=a},53737:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIVirtualScroll=void 0;var n=o(70655);o(63940);var r=o(98813),i=o(11975),s=o(17971),a=o(10115),c=o(72411),l=o(47643),u=function(e){function t(t,o){var n=e.call(this,t)||this;return n.stateManager=o,n.syncMod=!0,n.addItemsSelector(),n}var o;return n.__extends(t,e),o=t,t.prototype.className=function(){return"UIVirtualScroll"},t.prototype.render=function(){return"<div>\n\t\t\t\t<div class=\"&__empty-message\">~There are no files~</div>\n\t\t\t\t<div class='&__loader'></div>\n\t\t\t\t<div class='&__drag-area'>~Drop image~</div>\n\t\t\t</div>"},t.prototype.reconcile=function(e){var t=this.elements.findIndex((function(t,o){return!e[o]||t.item.uniqueHashKey!==a.FileBrowserItem.create(e[o]).uniqueHashKey}));if(t>-1){for(var o=t;this.elements.length>o;o+=1)this.elements[o].destruct();this.elements.length=t}return t},t.prototype.build=function(e){var t=this,o=this.reconcile(e);e.slice(o>-1?o:this.elements.length).forEach((function(e){var o=new s.UIBrowserItem(t.jodit,e);Object.keys(t.mods).forEach((function(e){o.setMod(e,t.mods[e])})),t.append(o)})),this.setMod("empty",!this.elements.length)},t.prototype.onScrollLoadChunk=function(){!this.stateManager.isFavoriteItems&&this.j.o.pixelOffsetLoadNewChunk>this.container.scrollHeight-(this.container.scrollTop+this.container.offsetHeight)&&this.j.loadingManager.loadItemsChunk()},t.prototype.onDragOver=function(e){e.preventDefault(),this.setMod("dragover",!0)},t.prototype.onDragLeave=function(e){e.preventDefault(),this.setMod("dragover",!1)},t.prototype.addItemsSelector=function(){c.UISelectItems.install(this)},t.intersectRect=function(e,t){return!(t.left>e.left+e.width||e.left>t.left+t.width||t.top>e.top+e.height||e.top>t.top+t.height)},t.prototype.onSelectItems=function(e){var t=[];this.elements.forEach((function(n){var r=(0,l.position)(n.container);o.intersectRect(r,e)&&t.push(n.item)})),this.stateManager.state.activeElements=t},n.__decorate([(0,i.watch)(":afterResize"),(0,i.watch)(":resize"),(0,i.watch)("container:scroll"),(0,i.throttle)()],t.prototype,"onScrollLoadChunk",null),n.__decorate([(0,i.watch)("container:dragover")],t.prototype,"onDragOver",null),n.__decorate([(0,i.watch)(["container:dragleave","container:drop"])],t.prototype,"onDragLeave",null),o=n.__decorate([i.component],t)}(r.UIGroup);t.UIVirtualScroll=u},64413:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIResize=void 0,o(8931);var n=o(47077),r=o(38886),i=function(){function e(){}return e.remove=function(e){(0,n.css)(e.container,{width:null,height:null}),e.container.classList.remove("jodit-ui-resize"),r.Dom.safeRemove(e.container.querySelector(".jodit-ui-resize__handle"))},e.install=function(e,t){e.container.classList.add("jodit-ui-resize"),"static"===(0,n.css)(e.container,"position")&&(0,n.css)(e.container,"position","relative");var o=e.j.c.div("jodit-ui-resize__handle");o.classList.add("jodit-ui-resize__handle_type_"+t),e.container.appendChild(o),e.j.e.on(o,"mousedown touchstart",this.onStartResize.bind(this,e,t))},e.onStartResize=function(e,t,o){var n=e.j.async.throttle(this.onResize.bind(this,e,{x:o.clientX,y:o.clientY,w:e.container.offsetWidth,h:e.container.offsetHeight,direction:t}),e.j.defaultTimeout/10);e.j.lock(),e.j.e.on(e.j.ow,"mousemove touchmove",n).one(e.j.ow,"mouseup touchend",this.onEndResize.bind(this,e,n))},e.onResize=function(e,t,o){var r=["left","right"].includes(t.direction),i=e.container.parentElement;i&&(0,n.css)(e.container,r?"width":"height",100*(r?(t.w+(o.clientX-t.x)*("right"===t.direction?1:-1))/i.offsetWidth:(t.h+(o.clientY-t.y)*("top"===t.direction?1:-1))/i.offsetHeight)+"%")},e.onEndResize=function(e,t,o){e.j.e.off(e.j.ow,"mousemove touchmove",t),e.j.unlock()},e}();t.UIResize=i},72411:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UISelectItems=void 0,o(31277);var n=o(38886),r=o(47077),i=function(){function e(){}return e.remove=function(e){n.Dom.safeRemove(e.container.querySelector(".jodit-ui-select-items")),e.j.e.off(e.container,"mousedown.uiselectitems touchstart.uiselectitems")},e.install=function(e){var t=e.j.c.div("jodit-ui-select-items");e.j.e.on(e.container,"mousedown.uiselectitems touchstart.uiselectitems",this.onStartSelect.bind(this,e,t))},e.onStartSelect=function(e,t,o){if(o.target===e.container){(0,r.css)(t,{width:0,height:0}),e.container.appendChild(t);var n={x:o.clientX,y:o.clientY,w:e.container.offsetWidth,h:e.container.offsetHeight},i=e.j.async.throttle(this.onSelect.bind(this,e,t,n),e.j.defaultTimeout/10);e.j.lock(),e.j.e.on(e.j.ow,"mousemove touchmove",i).one(e.j.ow,"mouseup touchend",this.onEndSelect.bind(this,e,t,i)),e.onSelectItems({left:n.x,top:n.y,width:0,height:0})}},e.onSelect=function(e,t,o,n){var i={left:o.x>n.clientX?n.clientX:o.x,top:o.y>n.clientY?n.clientY:o.y,width:Math.abs(o.x-n.clientX),height:Math.abs(o.y-n.clientY)};(0,r.css)(t,i),e.onSelectItems(i)},e.onEndSelect=function(e,t,o,r){n.Dom.safeRemove(t),e.j.e.off(e.j.ow,"mousemove touchmove",o),e.j.unlock()},e}();t.UISelectItems=i},99425:function(e){e.exports={Favorites:"Избранное",Settings:"Настройки",Light:"Светлая",Dark:"Темная",Theme:"Тема",Show:"Показать",Hide:"Скрыть","Show favorites":"Показывать избранное",Tiles:"Плитка",List:"Список",Compact:"Компактный",View:"Отображение","Folders position":"Позиция папок","Sort by":"Сортировать по","Extra small":"Очень маленькие",Small:"Маленькие",Large:"Большие","Extra large":"Очень большие","Tile size":"Размер плитки"}},21601:function(e){e.exports='<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"> <path d="M365.4,59.628c60.56,0,109.6,49.03,109.6,109.47c0,109.47-109.6,171.8-219.06,281.271 C146.47,340.898,37,278.568,37,169.099c0-60.44,49.04-109.47,109.47-109.47c54.73,0,82.1,27.37,109.47,82.1 C283.3,86.999,310.67,59.628,365.4,59.628z"/> </svg>'},67101:function(e){e.exports='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"> <path d="M28.7,16.3l-12-13c-0.4-0.4-1.1-0.4-1.5,0l-12,13C3,16.6,2.9,17,3.1,17.4C3.2,17.8,3.6,18,4,18h3v10c0,0.6,0.4,1,1,1h16 c0.6,0,1-0.4,1-1V18h3c0.4,0,0.8-0.2,0.9-0.6C29.1,17,29,16.6,28.7,16.3z"/> </svg>'},34839:function(e){e.exports='<svg viewBox="0 0 252 252" xmlns="http://www.w3.org/2000/svg"> <path d="M0 16C0 7.16344 7.16344 0 16 0H85.6364C86.5205 0 87.3797 0.29288 88.0796 0.832871L120.92 26.1671C121.62 26.7071 122.48 27 123.364 27H227C235.837 27 243 34.1634 243 43V132.335C243 134.779 240.234 136.198 238.25 134.772L233 131L226.5 127L220 124L212.5 122L202.5 120L189 120.5L179.5 122.5L170.5 125.5L161.5 130.5L157 133.5L153 137L146.5 144L141 152L137 160L134 168L132.5 178L132 183.5V189.5L133 197.5L135 205.5L137.5 211.5L139.524 214.996C141.068 217.663 139.144 221 136.062 221H16C7.16344 221 0 213.837 0 205V16Z"/> <circle cx="197" cy="185" r="56"/> <path d="M188.364 215.955V151.591H204.636V215.955H188.364ZM164.318 191.909V175.636H228.682V191.909H164.318Z" fill="white"/> </svg>'},87989:function(e,t,o){"use strict";o.r(t)},6337:function(e,t,o){"use strict";o.r(t)},80355:function(e,t,o){"use strict";o.r(t)},80744:function(e,t,o){"use strict";o.r(t)},35850:function(e,t,o){"use strict";o.r(t)},73570:function(e,t,o){"use strict";o.r(t)},6590:function(e,t,o){"use strict";o.r(t)},49573:function(e,t,o){"use strict";o.r(t)},14001:function(e,t,o){"use strict";o.r(t)},11785:function(e,t,o){"use strict";o.r(t)},28389:function(e,t,o){"use strict";o.r(t)},31748:function(e,t,o){"use strict";o.r(t)},87249:function(e,t,o){"use strict";o.r(t)},56952:function(e,t,o){"use strict";o.r(t)},63940:function(e,t,o){"use strict";o.r(t)},8931:function(e,t,o){"use strict";o.r(t)},31277:function(e,t,o){"use strict";o.r(t)}},function(e){return e(e.s=4312)}])}));