((e,t)=>{if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var s in o)("object"==typeof exports?exports:e)[s]=o[s]}})(self,(function(){return(self.webpackChunkjodit_pro=self.webpackChunkjodit_pro||[]).push([[588],{91697(e,t,o){"use strict";o.r(t),o.d(t,{TodoList(){return f}});var s=o(70655),i=o(10818),n=o(51663),l=o(25916),a=o(38886),r=o(36257),p=o(61833),c=o(1120),d=o(43854),u=o(34759);d.D.prototype.todoList={className:"todo-list",labelClassName:"todo-list__label",inputFactory(e){return e.createInside.element("input",{type:"checkbox",tabindex:-1})}},d.D.prototype.controls.todoList={tooltip:"To-do List",icon:"todo-list",command:"todolist",isActive(e){const t=e.s.current();return!(!t||!a.i.closest(t,(e=>a.i.isElement(e)&&a.i.isTag(e,"ul")&&e.classList.contains("todo-list")),e.editor))}},u.J.set("todo-list",o(11176));class f extends i.S{constructor(){super(...arguments),this.requires=["license"],this.buttons=[{name:"todoList",group:"list"}],this.__isOwnCommand=!1}afterInit(e){e.registerCommand("todoList",this.onCommand)}onCommand(){try{this.__isOwnCommand=!0,this.jodit.s.commitStyle({element:"ul",attributes:{class:this.j.o.todoList.className},hooks:{afterWrapList:this.__afterWrapList,afterToggleAttribute:this.__afterWrapList}})}finally{this.__isOwnCommand=!1}return!1}__prependInputLabel(e){const{jodit:t}=this,{labelClassName:o,inputFactory:s}=this.j.o.todoList;if(e.querySelector("label."+o))return;const i=t.createInside.element("label",{contenteditable:"false",class:o}),n=s(t);i.appendChild(n),a.i.prepend(e,i)}__afterToggleList(e,t){return e!==p.Ve&&e!==p.J5||!this.__isOwnCommand?e===p.Nc||e===p.J5||e===p.Ve?this.__removeInputs(t):void 0:this.__appendInputs(t)}__appendInputs(e){e.querySelectorAll("li").forEach(this.__prependInputLabel)}__removeInputs(e){const{labelClassName:t}=this.j.o.todoList;e.querySelectorAll("label."+t).forEach(a.i.safeRemove)}__beforeToggleOrderedList(e,t,o){var s;const i="__beforeToggleOrderedList";if(e!==p.J5&&(t.classList.contains(this.j.o.todoList.className)||o.isApplied(t,i))&&("ul"===o.element||"ol"===o.element)&&(null===(s=o.options.attributes)||void 0===s?void 0:s.class)!==this.j.o.todoList.className){const e=a.i.replace(t,o.element,this.jodit.createInside);return o.setApplied(e,i),this.__removeInputs(e),e}}__afterEnter(){(0,l.$$)("ul."+this.j.o.todoList.className+" li",this.jodit.editor).forEach(this.__prependInputLabel)}__afterTab(){(0,l.$$)("ul:not(."+this.j.o.todoList.className+") > li > label",this.jodit.editor).filter(this.isTodoLeafLabel).forEach(a.i.safeRemove)}__changeSelection(e){const t=this.j.s.current();this.isTodoLeafLabel(t)&&(e.preventDefault(),e.stopPropagation(),this.j.s.setCursorAfter(t))}__isEmptyListLeaf(e){return a.i.isEmpty(e,(e=>("input"!==e.nodeName.toLowerCase()||!this.isTodoLeafLabel(e.parentElement))&&r.NO_EMPTY_TAGS.has(e.tagName.toLowerCase())))}__backSpaceBeforeCases(e,t){if(e){const e=a.i.findNotEmptySibling(t,!0);this.isTodoLeafLabel(e)&&a.i.safeRemove(e)}}__isInvisibleForCursor(e){if(this.isTodoLeafLabel(e))return!0}__backSpaceAfterDelete(){const{labelClassName:e}=this.j.o.todoList;(0,l.$$)("label."+e,this.jodit.editor).forEach((e=>{e.closest("ul."+this.j.o.todoList.className)?e.previousSibling&&a.i.prepend(e.parentElement,e):a.i.safeRemove(e)}))}__afterWrapList(e,t){e===p.Qu&&this.__appendInputs(t)}__onClickInput(e){const t=e.target;t&&a.i.isTag(t,"input")&&"checkbox"===t.type&&this.isTodoLeafLabel(t.parentElement)&&(0,l.attr)(t,"checked",t.checked?"checked":null)}isTodoLeafLabel(e){const{labelClassName:t}=this.j.o.todoList;return a.i.isHTMLElement(e)&&e.classList.contains(t)}beforeDestruct(e){}}(0,s.gn)([n.autobind],f.prototype,"onCommand",null),(0,s.gn)([n.autobind],f.prototype,"__prependInputLabel",null),(0,s.gn)([(0,n.watch)(":commitStyleAfterToggleList")],f.prototype,"__afterToggleList",null),(0,s.gn)([(0,n.watch)(":commitStyleBeforeUnwrapList")],f.prototype,"__beforeToggleOrderedList",null),(0,s.gn)([(0,n.watch)(":afterEnter")],f.prototype,"__afterEnter",null),(0,s.gn)([(0,n.watch)(":afterTab")],f.prototype,"__afterTab",null),(0,s.gn)([(0,n.watch)("j.ed:selectionchange"),(0,n.watch)(":afterEnter")],f.prototype,"__changeSelection",null),(0,s.gn)([(0,n.watch)(":enterIsEmptyListLeaf")],f.prototype,"__isEmptyListLeaf",null),(0,s.gn)([(0,n.watch)(":backSpaceBeforeCases")],f.prototype,"__backSpaceBeforeCases",null),(0,s.gn)([(0,n.watch)(":backSpaceIsMovedIgnore"),(0,n.watch)(":isInvisibleForCursor")],f.prototype,"__isInvisibleForCursor",null),(0,s.gn)([(0,n.watch)(":backSpaceAfterDelete")],f.prototype,"__backSpaceAfterDelete",null),(0,s.gn)([n.autobind],f.prototype,"__afterWrapList",null),(0,s.gn)([(0,n.watch)(":click")],f.prototype,"__onClickInput",null),(0,s.gn)([n.autobind],f.prototype,"isTodoLeafLabel",null),c.Jodit.plugins.add("todo-list",f)},70655(e,t,o){"use strict";function s(e,t,o,s){var i,n=arguments.length,l=3>n?t:null===s?s=Object.getOwnPropertyDescriptor(t,o):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(l=(3>n?i(l):n>3?i(t,o,l):i(t,o))||l);return n>3&&l&&Object.defineProperty(t,o,l),l}o.d(t,{gn(){return s}})},11176(e){e.exports='<svg stroke="black" stroke-linejoin="round" stroke-linecap="round" stroke-width="28" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"> \x3c!-- <rect fill="none" height="256" width="256"/>--\x3e <line fill="none" x1="130" x2="241" y1="54" y2="54"/> <line fill="none" x1="130" x2="241" y1="128" y2="128"/> <line fill="none" x1="130" x2="241" y1="202" y2="202"/> <polyline fill="none" points="92 38 57.3 70 40 54"/> <polyline fill="none" points="92 112 57.3 144 40 128"/> <polyline fill="none" points="92 186 57.3 218 40 202"/> </svg>'}},e=>e(e.s=91697)])}));